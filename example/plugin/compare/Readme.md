The deriveCompare function is a maintainable and fast way to implement fast Less functions.

Given the following input:

```go
package compare

import "sort"

type MyStruct struct {
	Int64     int64
	StringPtr *string
}

func sortStructs(ss []*MyStruct) {
	sort.Slice(ss, func(i, j int) bool {
		return deriveCompare(ss[i], ss[j]) < 0
	})
}
```

It will generate the following code:

```go
// Code generated by goderive DO NOT EDIT.

package compare

import (
	"strings"
)

func deriveCompare(this, that *MyStruct) int {
	if this == nil {
		if that == nil {
			return 0
		}
		return -1
	}
	if that == nil {
		return 1
	}
	if c := deriveCompareint64(this.Int64, that.Int64); c != 0 {
		return c
	}
	if c := deriveComparePtrTostring(this.StringPtr, that.StringPtr); c != 0 {
		return c
	}
	return 0
}

func deriveCompareint64(this, that int64) int {
	if this != that {
		if this < that {
			return -1
		} else {
			return 1
		}
	}
	return 0
}

func deriveComparePtrTostring(this, that *string) int {
	if this == nil {
		if that == nil {
			return 0
		}
		return -1
	}
	if that == nil {
		return 1
	}
	return deriveComparestring(*this, *that)
}

func deriveComparestring(this, that string) int {
	return strings.Compare(this, that)
}
```